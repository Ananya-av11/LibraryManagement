{% extends 'userhome.html' %}
{% block content %}
<center>
{% if messages %}
<div class="alert alert-info alert-dismissible" style="width: 50%; margin-bottom: 15px; font-weight: bold;">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
        {% for message in messages %}
            {{ message }}
        {% endfor %}
</div>
{% endif %}
</center>
{% if items %}
<div class="container-fluid p-4 mt-2 mb-5 align-items-center justify-content-center">
    <h2 class="text-center mb-3">Purchase Information</h2>
    <div class="table-responsive">
        <table class="table table-hover">
            <tr class="bg-dark text-light">
            <!-- <tr style="height: 40px; text-align: center;">  -->
                <th>Image</th>
                <th>Book Name</th>    
                <th>Author</th>
                <th>Publisher ID</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Purchased Date</th>
                <th>Status</th>    
                
            </tr>
            {% for i in items %}
            <tr>
                <td><img src="{{i.book.bookimage.url}}" alt="" width="50" height="50"></td>
                <td>{{i.book.bookname}}</td>
                <td>{{i.book.authorname}}</td>
                <td>{{i.book.publisher_id}}</td>
                <td>{{i.book.price}}</td>
                <td>{{i.quantity}}</td>
                <td>{{i.purchasedate}}</td>
                <td>{% if i.purchasestatus %} paid {% else %} pending {% endif %}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% else %}
<div style="width: 100%; height: 300px;">
    <p class="text-center"><b>No purchased books found.</b></p>
</div>
{% endif %}


{% if overdue_alert %}
<!-- <script>
   
    $(document).ready(function () {
        // Check localStorage when the page loads
        if (localStorage.getItem("hideRentalBadge") === "true") {
            $('.nav-link[href*="rentalhistory"] .badge').hide();
        }

        // Hide badge when modal closes & store state
        $('#overdueModal').on('hidden.bs.modal', function () {
            $('.nav-link[href*="rentalhistory"] .badge').hide();
            localStorage.setItem("hideRentalBadge", "true");  // Store in localStorage
        });
    });

</script> -->
{% endif %}

{% endblock %}